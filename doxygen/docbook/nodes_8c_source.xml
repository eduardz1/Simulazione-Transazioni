<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_nodes_8c_source" xml:lang="en-US">
<title>nodes.c</title>
<indexterm><primary>src/nodes.c</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_nodes_8c_source_1l00001"/>00001 <emphasis role="preprocessor">#include&#32;&lt;time.h&gt;</emphasis>
<anchor xml:id="_nodes_8c_source_1l00002"/>00002 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_nodes_8h">include/nodes.h</link>&quot;</emphasis>
<anchor xml:id="_nodes_8c_source_1l00003"/>00003 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_common_8h">include/common.h</link>&quot;</emphasis>
<anchor xml:id="_nodes_8c_source_1l00004"/>00004 
<anchor xml:id="_nodes_8c_source_1l00005"/>00005 <emphasis role="comment">/*&#32;transaction&#32;pool==transaction&apos;s&#32;array&#32;*/</emphasis>
<anchor xml:id="_nodes_8c_source_1l00006"/>00006 
<anchor xml:id="_nodes_8c_source_1l00007"/>00007 <emphasis role="comment">/*</emphasis>
<anchor xml:id="_nodes_8c_source_1l00008"/>00008 <emphasis role="comment">&#32;======================</emphasis>
<anchor xml:id="_nodes_8c_source_1l00009"/>00009 <emphasis role="comment">&#32;||&#32;GLOBAL&#32;VARIABLES&#32;||</emphasis>
<anchor xml:id="_nodes_8c_source_1l00010"/>00010 <emphasis role="comment">&#32;======================</emphasis>
<anchor xml:id="_nodes_8c_source_1l00011"/>00011 <emphasis role="comment">&#32;*/</emphasis>
<anchor xml:id="_nodes_8c_source_1l00012"/>00012 
<anchor xml:id="_nodes_8c_source_1l00013"/>00013 <emphasis role="comment">/*&#32;parameters&#32;of&#32;simulation&#32;*/</emphasis>
<anchor xml:id="_nodes_8c_source_1l00014"/><link linkend="_nodes_8c_1a963935917aae796fbb8f2728703adf04">00014</link> <emphasis role="keyword">struct&#32;</emphasis><link linkend="_structparameters">parameters</link>&#32;*<link linkend="_nodes_8c_1a963935917aae796fbb8f2728703adf04">par</link>;
<anchor xml:id="_nodes_8c_source_1l00015"/><link linkend="_nodes_8c_1af667a518a4feef7b7540ebac0cd618cf">00015</link> <link linkend="_structuser__t">user</link>&#32;*<link linkend="_nodes_8c_1af667a518a4feef7b7540ebac0cd618cf">usersPID</link>;
<anchor xml:id="_nodes_8c_source_1l00016"/><link linkend="_nodes_8c_1a803b35477f039b41487c3b1abee12b80">00016</link> <link linkend="_structnode__t">node</link>&#32;*<link linkend="_nodes_8c_1a803b35477f039b41487c3b1abee12b80">nodesPID</link>;
<anchor xml:id="_nodes_8c_source_1l00017"/><link linkend="_nodes_8c_1a61246e5e608d3240fbbee97c978af351">00017</link> <link linkend="_structledger__t">ledger</link>&#32;*<link linkend="_nodes_8c_1a61246e5e608d3240fbbee97c978af351">mainLedger</link>;
<anchor xml:id="_nodes_8c_source_1l00018"/>00018 
<anchor xml:id="_nodes_8c_source_1l00019"/><link linkend="_nodes_8c_1ae520355298e7bac453a556eeab7df45f">00019</link> <emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_nodes_8c_1ae520355298e7bac453a556eeab7df45f">semID</link>;
<anchor xml:id="_nodes_8c_source_1l00020"/><link linkend="_nodes_8c_1abba475816ec0c77dd5821e7fa9ab4207">00020</link> <emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_nodes_8c_1abba475816ec0c77dd5821e7fa9ab4207">queueID</link>;
<anchor xml:id="_nodes_8c_source_1l00021"/>00021 
<anchor xml:id="_nodes_8c_source_1l00022"/><link linkend="_nodes_8c_1af97c23712a0bab92e0ca95694e85282e">00022</link> pid_t&#32;<link linkend="_nodes_8c_1af97c23712a0bab92e0ca95694e85282e">myPID</link>;
<anchor xml:id="_nodes_8c_source_1l00023"/>00023 
<anchor xml:id="_nodes_8c_source_1l00024"/>00024 <emphasis role="comment">/*void&#32;Node()</emphasis>
<anchor xml:id="_nodes_8c_source_1l00025"/>00025 <emphasis role="comment">{</emphasis>
<anchor xml:id="_nodes_8c_source_1l00026"/>00026 <emphasis role="comment">&#32;&#32;&#32;&#32;int&#32;t_pool[SO_TP_SIZE];</emphasis>
<anchor xml:id="_nodes_8c_source_1l00027"/>00027 <emphasis role="comment">&#32;&#32;&#32;&#32;checkTpFull(t_pool[SO_TP_SIZE]);</emphasis>
<anchor xml:id="_nodes_8c_source_1l00028"/>00028 <emphasis role="comment">&#32;&#32;&#32;&#32;arrayProcesser();</emphasis>
<anchor xml:id="_nodes_8c_source_1l00029"/>00029 <emphasis role="comment">&#32;&#32;&#32;&#32;createBlock();</emphasis>
<anchor xml:id="_nodes_8c_source_1l00030"/>00030 <emphasis role="comment">}</emphasis>
<anchor xml:id="_nodes_8c_source_1l00031"/>00031 <emphasis role="comment"></emphasis>
<anchor xml:id="_nodes_8c_source_1l00032"/>00032 <emphasis role="comment">int&#32;checkTpFull(int&#32;t_pool[SO_TP_SIZE])</emphasis>
<anchor xml:id="_nodes_8c_source_1l00033"/>00033 <emphasis role="comment">{</emphasis>
<anchor xml:id="_nodes_8c_source_1l00034"/>00034 <emphasis role="comment">&#32;&#32;&#32;&#32;if&#32;(t_pool[SO_TP_SIZE]&#32;==&#32;SO_TP_SIZE)</emphasis>
<anchor xml:id="_nodes_8c_source_1l00035"/>00035 <emphasis role="comment">&#32;&#32;&#32;&#32;{</emphasis>
<anchor xml:id="_nodes_8c_source_1l00036"/>00036 <emphasis role="comment">&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;return&#32;0;</emphasis>
<anchor xml:id="_nodes_8c_source_1l00037"/>00037 <emphasis role="comment">&#32;&#32;&#32;&#32;}</emphasis>
<anchor xml:id="_nodes_8c_source_1l00038"/>00038 <emphasis role="comment">}</emphasis>
<anchor xml:id="_nodes_8c_source_1l00039"/>00039 <emphasis role="comment"></emphasis>
<anchor xml:id="_nodes_8c_source_1l00040"/>00040 <emphasis role="comment">void&#32;arrayProcesser()</emphasis>
<anchor xml:id="_nodes_8c_source_1l00041"/>00041 <emphasis role="comment">{</emphasis>
<anchor xml:id="_nodes_8c_source_1l00042"/>00042 <emphasis role="comment">&#32;&#32;&#32;&#32;int&#32;i&#32;=&#32;0;</emphasis>
<anchor xml:id="_nodes_8c_source_1l00043"/>00043 <emphasis role="comment">&#32;&#32;&#32;&#32;for&#32;(i;&#32;i&#32;&lt;&#32;SO_TP_SIZE&#32;-&#32;1;&#32;i++)</emphasis>
<anchor xml:id="_nodes_8c_source_1l00044"/>00044 <emphasis role="comment">&#32;&#32;&#32;&#32;{</emphasis>
<anchor xml:id="_nodes_8c_source_1l00045"/>00045 <emphasis role="comment">&#32;&#32;&#32;&#32;}</emphasis>
<anchor xml:id="_nodes_8c_source_1l00046"/>00046 <emphasis role="comment">}</emphasis>
<anchor xml:id="_nodes_8c_source_1l00047"/>00047 <emphasis role="comment"></emphasis>
<anchor xml:id="_nodes_8c_source_1l00048"/>00048 <emphasis role="comment">int&#32;createBlock()</emphasis>
<anchor xml:id="_nodes_8c_source_1l00049"/>00049 <emphasis role="comment">{</emphasis>
<anchor xml:id="_nodes_8c_source_1l00050"/>00050 <emphasis role="comment">}</emphasis>
<anchor xml:id="_nodes_8c_source_1l00051"/>00051 <emphasis role="comment"></emphasis>
<anchor xml:id="_nodes_8c_source_1l00052"/>00052 <emphasis role="comment">int&#32;sleepMethod(int&#32;argc,&#32;char&#32;*argv[])</emphasis>
<anchor xml:id="_nodes_8c_source_1l00053"/>00053 <emphasis role="comment">{</emphasis>
<anchor xml:id="_nodes_8c_source_1l00054"/>00054 <emphasis role="comment">&#32;&#32;&#32;&#32;randSleepTime.tv_sec&#32;=&#32;0;</emphasis>
<anchor xml:id="_nodes_8c_source_1l00055"/>00055 <emphasis role="comment">&#32;&#32;&#32;&#32;randSleepTime.tv_nsec&#32;=&#32;RAND(SO_MIN_TRANS_PROC_NSEC,&#32;SO_MAX_TRANS_PROC_NSEC);</emphasis>
<anchor xml:id="_nodes_8c_source_1l00056"/>00056 <emphasis role="comment">}*/</emphasis>
<anchor xml:id="_nodes_8c_source_1l00057"/>00057 
<anchor xml:id="_nodes_8c_source_1l00058"/><link linkend="_nodes_8c_1a0ddf1224851353fc92bfbff6f499fa97">00058</link> <emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_nodes_8c_1a0ddf1224851353fc92bfbff6f499fa97">main</link>(<emphasis role="keywordtype">int</emphasis>&#32;argc,&#32;<emphasis role="keywordtype">char</emphasis>&#32;*argv[])
<anchor xml:id="_nodes_8c_source_1l00059"/>00059 {
<anchor xml:id="_nodes_8c_source_1l00060"/>00060 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_nodes_8c_1af97c23712a0bab92e0ca95694e85282e">myPID</link>&#32;=&#32;getpid();
<anchor xml:id="_nodes_8c_source_1l00061"/>00061 &#32;&#32;&#32;&#32;printf(<emphasis role="stringliteral">&quot;Node&#32;%d&#32;has&#32;finished\n&quot;</emphasis>,&#32;<link linkend="_nodes_8c_1af97c23712a0bab92e0ca95694e85282e">myPID</link>);
<anchor xml:id="_nodes_8c_source_1l00062"/>00062 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;0;
<anchor xml:id="_nodes_8c_source_1l00063"/>00063 
<anchor xml:id="_nodes_8c_source_1l00064"/>00064 &#32;&#32;&#32;&#32;<link linkend="_nodes_8c_1abba475816ec0c77dd5821e7fa9ab4207">queueID</link>&#32;=&#32;msgget(<link linkend="_nodes_8c_1af97c23712a0bab92e0ca95694e85282e">myPID</link>,&#32;IPC_CREAT&#32;|&#32;0600);
<anchor xml:id="_nodes_8c_source_1l00065"/>00065 }
</programlisting></section>
